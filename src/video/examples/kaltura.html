<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Kaltura Javascript Example</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
    
    <script type="text/javascript">
        var notificationslist = ['startUp',
                                 'durationChange',
                                 'initiatApp',
                                 'changeMedia',
                                 'cleanMedia',
                                 'skinLoaded',
                                 'skinLoadFailed',
                                 'entryReady',
                                 'entryFailed',
                                 'sourceReady',
                                 'loadMedia',
                                 'mediaLoading',
                                 'mediaReady',
                                 'mediaUnloaded',
                                 'mediaLoadError',
                                 'mediaError',
                                 'rootResize',
                                 'mediaViewableChange',
                                 'pre1start',
                                 'post1start',
                                 'doPause',
                                 'doPlay',
                                 'doPlayEntry',
                                 'doStop',
                                 'doSeek',
                                 'doIntelligentSeek',
                                 'doSwitch',
                                 'kdpReady',
                                 'kdpEmpty',
                                 'layoutReady',
                                 'playerStateChange',
                                 'playerReady',
                                 'playerContainerReady',
                                 'playerPaused',
                                 'playerPlayed',
                                 'playerSeekStart',
                                 'playerSeekEnd',
                                 'playerPlayEnd',
                                 'playerUpdatePlayhead',
                                 'playerDimensionChange',
                                 'openFullScreen',
                                 'closeFullScreen',
                                 'changeVolume',
                                 'volumeChanged',
                                 'enableGui',
                                 'fastForward',
                                 'stopFastForward',
                                 'bytesDownloadedChange',
                                 'bytesTotalChange',
                                 'bufferProgress',
                                 'bufferChange',
                                 'playerDownloadComplete',
                                 'endEntrySession',
                                 'endPreSession',
                                 'endPostSession',
                                 'durationChange',
                                 'hasCloseFullScreen',
                                 'hasOpenedFullScreen',
                                 'switchingChange',
                                 'scrubberDragStart',
                                 'scrubberDragEnd',
                                 'alert',
                                 'showUiElement',
                                 'cancelAlerts',
                                 'enableAlerts',
                                 'freePreviewEnd'];
         
         function jsCallbackReady () {
             var player = document.getElementById('kdp3');
             
             player.addJsListener("volumeChanged", "volumeChangedHandler");
             player.addJsListener("playerStateChange", "playerStateChangeHandler");
             player.addJsListener("durationChange", "durationChangeHandler");
             player.addJsListener("playerUpdatePlayhead", "playerUpdatePlayheadHandler");
             player.addJsListener("bytesTotalChange", "bytesTotalChangeHandler");
             player.addJsListener("bytesDownloadedChange", "bytesDownloadedChangeHandler");
             player.addJsListener("entryReady", "entryReadyHandler");
         }

         function entryReadyHandler(data, id) {
             console.log('entryReadyHandle: ' + data.duration);
         }

         function playerStateChangeHandler (data, id) {
             console.log('playerStateChangeHandler: ' + data);
         }
         
         function durationChangeHandler (data, id) {
             $('#videoduration').text(data.newValue);
         }
         
         function playerUpdatePlayheadHandler(data, id) {
             $('#videotime').text(data);
         }

         function play() {
             var player = document.getElementById('kdp3');
             player.sendNotification('doPlay');
         }

         function seek() {
             var player = document.getElementById('kdp3');
             player.sendNotification('doSeek', 100);
         }

         function isPlaying() {
             var player = document.getElementById('kdp3');
             var rv = player.evaluate('{mediaProxy.entry.duration}'); 
         }
     

    </script>
</head>
<body>

<object name="kdp3" id="kdp3" type="application/x-shockwave-flash" 
allowScriptAccess="always" 
allowNetworking="all" 
allowFullScreen="true" height="288" width="437" 
data="http://www.kaltura.com/index.php/kwidget/wid/_203822/uiconf_id/1898102/entry_id/1_45quhn2m/">

<param name="allowScriptAccess" value="always" />
<param name="allowNetworking" value="all" />
<param name="allowFullScreen" value="true" />
<param name="bgcolor" value="#000000" />
<param name="movie" value="http://www.kaltura.com/index.php/kwidget/wid/_203822/uiconf_id/1898102/entry_id/1_45quhn2m/"/>
<param name="flashVars" value="autoPlay=true&streamerType=rtmp"/>
</object>

<a href="#" onclick="isPlaying()">Is Playing</a>
<br /><br />
<a href="#" onclick="play()">Play</a>
<br /><br />
<a href="#" onclick="seek()">Seek</a>
<br /><br />
Duration: <span id="videoduration"></span><br /><br />
Time: <span id="videotime"></span>

</body>
</html>